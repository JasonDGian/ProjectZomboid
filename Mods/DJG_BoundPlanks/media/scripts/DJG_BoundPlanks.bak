module DJG_BoundPlanks
{

    -- Definición del item BoundPlanks
    item BoundPlanks
    {
        DisplayCategory     = Material,
        Type                = Normal,
        DisplayName         = "Bound planks",  -- Asegúrate de que el nombre está entre comillas
        Icon                = "BoundPlanks",  -- Usa un ícono que esté disponible en tu mod
        Weight              = 6.0,
        Count               = 1,
        WorldStaticModel    = "Plank",  -- Reemplazar con el modelo correcto si es necesario
        AttachmentType      = "BigWeapon",  -- Si no es un arma, esto puede eliminarse
        Model               = "Plank",  -- Asegúrate de que el modelo es válido
        BodyLocation        = "Back",  -- Esto se usa para objetos tipo arma, puede ser innecesario
        TwoHandWeapon       = TRUE,  -- Esto puede ser innecesario si no es un arma
    }

    -- Receta para atar tablones
    recipe Atar 10 Tablones
    {
        Plank = 10,
        Twine = 1,  -- Asegúrate de que "Twine" esté definido correctamente
        Result: BoundPlanks,
        Time: 20.0,
        Category: Survival,
        AnimNode = loot,
    }

    -- Receta para desatar tablones atados
    recipe Desatar Tablones Atados
    {
        BoundPlanks = 1,
        Result: Plank = 10,  -- Devuelve 10 tablones cuando se desata
        Time: 10.0,
        Category: Survival,
        AnimNode = loot,
    }

}

-- Añadir opciones al menú contextual
Events.OnFillWorldObjectContextMenu.Add(function(player, context, worldobjects)
    for i, object in ipairs(worldobjects) do
        -- Si el objeto es un BoundPlanks, se añadirá la opción de "Desatar Tablones Atados"
        if object:getType() == "BoundPlanks" then
            local playerObj = getSpecificPlayer(player)
            context:addOption("Desatar Tablones Atados", object, desatarTabla, playerObj)
        -- Si el objeto es un Plank, se añadirá la opción de "Atar Tabla"
        elseif object:getType() == "Plank" then
            local playerObj = getSpecificPlayer(player)
            context:addOption("Atar Tabla", object, atarTabla, playerObj)
        end
    end
end)

-- Función para atar tablones
function atarTabla(player, object)
    -- Lógica para atar los tablones, como usar los recursos para crear BoundPlanks
    local playerObj = getSpecificPlayer(player)
    if playerObj:getInventory():contains("Twine") then
        playerObj:getInventory():Remove("Twine")  -- Elimina el Twine del inventario
        -- Aquí, agrega BoundPlanks al inventario
        playerObj:getInventory():AddItem("DJG_BoundPlanks.BoundPlanks")
        print("Has atado los tablones!")
    else
        print("No tienes suficiente Twine para atar los tablones.")
    end
end

-- Función para desatar los tablones atados
function desatarTabla(player, object)
    -- Lógica para desatar los tablones atados, devolviendo 10 tablones
    local playerObj = getSpecificPlayer(player)
    if playerObj:getInventory():contains("BoundPlanks") then
        playerObj:getInventory():Remove("BoundPlanks")  -- Elimina BoundPlanks del inventario
        -- Aquí, agrega 10 tablones al inventario
        playerObj:getInventory():AddItem("Base.Plank")
        print("Has desatado los tablones!")
    else
        print("No tienes BoundPlanks para desatar.")
    end
end
